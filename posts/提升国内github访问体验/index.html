<!doctype html><html lang=zh><meta charset=utf-8><meta name=viewport content="width=device-width"><title>提升国内GitHub访问体验 | 惒泊の部落格</title><link rel=stylesheet href=/css/eureka.min.css><script defer src=/js/eureka.min.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css media=print onload="this.media='all',this.onload=null" crossorigin><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/dart.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/javascript.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/typescript.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/matlab.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/go.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/verilog.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/shell.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/bash.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/latex.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/markdown.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js integrity="sha256-uNYoXefWRqv+PsIF/OflNmwtKM4lStn9yrz2gVl6ymo=" crossorigin></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X media=print onload="this.media='all',this.onload=null" crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><link rel=icon type=image/png sizes=32x32 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_2.png><link rel=apple-touch-icon sizes=180x180 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_2.png><meta name=description content="概述 提升GitHub的体验, 主要是下面几个方面的提升 无障碍访问github.io域名的网站 无障碍加载"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"/posts/"},{"@type":"ListItem","position":2,"name":"提升国内GitHub访问体验","item":"/posts/%E6%8F%90%E5%8D%87%E5%9B%BD%E5%86%85github%E8%AE%BF%E9%97%AE%E4%BD%93%E9%AA%8C/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/%E6%8F%90%E5%8D%87%E5%9B%BD%E5%86%85github%E8%AE%BF%E9%97%AE%E4%BD%93%E9%AA%8C/"},"headline":"提升国内GitHub访问体验 | 惒泊の部落格","datePublished":"2021-01-21T15:43:41+00:00","dateModified":"2021-01-21T15:43:41+00:00","wordCount":2263,"publisher":{"@type":"Person","name":"惒泊(HerbertHe)","logo":{"@type":"ImageObject","url":"/images/icon.png"}},"description":"概述 提升GitHub的体验, 主要是下面几个方面的提升 无障碍访问github.io域名的网站 无障碍加载"}</script><meta property="og:title" content="提升国内GitHub访问体验 | 惒泊の部落格"><meta property="og:type" content="article"><meta property="og:image" content="/images/icon.png"><meta property="og:url" content="/posts/%E6%8F%90%E5%8D%87%E5%9B%BD%E5%86%85github%E8%AE%BF%E9%97%AE%E4%BD%93%E9%AA%8C/"><meta property="og:description" content="概述 提升GitHub的体验, 主要是下面几个方面的提升 无障碍访问github.io域名的网站 无障碍加载"><meta property="og:locale" content="zh"><meta property="og:site_name" content="惒泊の部落格"><meta property="article:published_time" content="2021-01-21T15:43:41+00:00"><meta property="article:modified_time" content="2021-01-21T15:43:41+00:00"><meta property="article:section" content="posts"><meta property="article:tag" content="GitHub"><meta property="article:tag" content="github.io"><body class="flex flex-col min-h-screen"><header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm"><div class="w-full max-w-screen-xl mx-auto"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=='Auto'||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName('html')[0].classList.add('dark')</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="mr-6 text-primary-text text-xl font-bold">惒泊の部落格</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">文章</a>
<a href=/categories/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">集合</a>
<a href=/tags/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">标签</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-adjust"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>浅色</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>深色</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>自动</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById('lightDarkMode');storageColorScheme==null||storageColorScheme=='Auto'?document.addEventListener('DOMContentLoaded',()=>{switchMode('Auto')}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'sun'),element.firstElementChild.classList.add('fa-sun')):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'moon'),element.firstElementChild.classList.add('fa-moon')),document.addEventListener('DOMContentLoaded',()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="flex-grow pt-16"><div class=pl-scrollbar><div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto"><div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12"><div class="col-span-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8"><h1 class="font-bold text-3xl text-primary-text">提升国内GitHub访问体验</h1><div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text"><div class="mr-6 my-2"><i class="fas fa-calendar mr-1"></i>
<span>2021-01-21</span></div><div class="mr-6 my-2"><i class="fas fa-clock mr-1"></i>
<span>5分钟阅读时长</span></div></div><div class=content><h2 id=概述>概述</h2><p>提升GitHub的体验, 主要是下面几个方面的提升</p><ul><li>无障碍访问<code>github.io</code>域名的网站</li><li>无障碍加载GitHub的静态资源, 比如图片</li><li>通过cdn快速获取GitHub可获取的资源</li></ul><h2 id=无障碍访问githubio>无障碍访问<code>github.io</code></h2><p>之前访问<code>xxx.github.io</code>这类GitHub Pages的网站的时候总出现404的情况, 甚至连挂梯子都没用, 这是非常不合理的。后来在V2EX上面有老哥提到了一个很难被发现的问题, 国内的电信运营商污染DNS。往常我以为它们就喜欢搞一些广告什么的, 结果非常的操蛋。之后就ping了一下<code>herberthe.github.io</code>我自己的GitHub Pages, 非常amazing啊结果是<code>127.0.0.1</code>。关于hosts和DNS这些不了解的话, 建议直接百度, 这里就不解释了。</p><p>我们访问<code>github.io</code>这类域名的网站通常需要经历的过程拓扑为: 本地局域网 &mdash; 运营商网络(就不区分各层局域网了) &mdash; 公网 &mdash; 目标的DNS服务 &mdash; 目标服务器</p><p>以<code>www.baidu.com</code>为例, 咱们用<code>tracert</code>追踪一下路由跳转情况(使用的Windows cmd), 其中标注的ip路由数据来源于<a href=https://www.ip138.com/>ip318</a>和站长之家的站长工具, 也可能不是很准确</p><pre><code class=language-text>通过最多 30 个跃点跟踪
到 www.a.shifen.com [14.215.177.38] 的路由:

  1    &lt;1 毫秒   &lt;1 毫秒   &lt;1 毫秒 OPENWRT [192.168.7.1]   // 路由器
  2     2 ms     1 ms    &lt;1 毫秒 192.168.1.1              // 本地网关
  3     3 ms     4 ms     2 ms  100.100.128.1            // 保留地址 NAT局域网
  4     4 ms     5 ms     4 ms  61.132.183.81            // 安徽省 宣城市 电信
  5     5 ms    12 ms     8 ms  202.102.219.81           // 安徽省 合肥市 电信
  6     *        *        *     请求超时。
  7    38 ms     *        *     113.96.4.90              // 广东省 广州市 电信
  8     *       29 ms    30 ms  113.96.11.78             // 广东省 广州市 电信
  9    26 ms    25 ms    26 ms  121.14.67.146            // 广东省 广州市 电信
 10     *        *        *     请求超时。
 11    25 ms    25 ms    25 ms  14.215.177.38            // 广东省 广州市 电信 idc机房
</code></pre><p>以<code>github.com</code>为例</p><pre><code class=language-text>通过最多 30 个跃点跟踪
到 github.com [140.82.112.3] 的路由:

  1     1 ms    &lt;1 毫秒    1 ms  OPENWRT [192.168.7.1]                             // 路由器
  2     3 ms     2 ms     1 ms  192.168.1.1                                       // 本地网关
  3     4 ms     3 ms     4 ms  100.100.128.1                                     // 保留地址 NAT局域网
  4     6 ms     3 ms     5 ms  60.173.80.49                                      // 安徽省 宣城市 电信
  5     8 ms     8 ms     7 ms  61.132.190.169                                    // 安徽省 合肥市 电信
  6    20 ms    22 ms    21 ms  202.97.96.181                                     // 上海市 中国电信骨干网接入点
  7    30 ms    29 ms    30 ms  202.97.24.190                                     // 中国 电信骨干网
  8    16 ms    16 ms    15 ms  202.97.12.190                                     // 中国 电信骨干网
  9   227 ms     *      221 ms  202.97.74.98                                      // 中国 电信骨干网
 10   228 ms   239 ms   229 ms  118.85.205.246                                    // 中国 电信骨干网
 11   270 ms   269 ms   269 ms  ae1.cs1.ams17.nl.eth.zayo.com [64.125.29.78]      // 美国 zayo集团骨干网
 12   262 ms     *        *     ae4.cs3.ams10.nl.eth.zayo.com [64.125.28.37]      // 美国 zayo集团骨干网
 13     *      271 ms     *     ae10.cs1.lhr15.uk.eth.zayo.com [64.125.29.17]     // 美国 zayo集团骨干网
 14     *        *        *     请求超时。
 15     *        *        *     请求超时。
 16     *        *        *     请求超时。
 17   271 ms   270 ms     *     ae1.ter1.iad10.us.zip.zayo.com [64.125.25.137]    // 美国 zayo集团骨干网
 18   266 ms   271 ms   268 ms  209.66.120.181.IPYX-243981-004-ZYO.zip.zayo.com [209.66.120.181]  // 美国 纽约州威彻斯特县怀**莱恩市abovenet通信股份有限公司
 19     *        *        *     请求超时。
 20     *        *        *     请求超时。
 21     *        *        *     请求超时。
 22   279 ms   279 ms   278 ms  github.com [140.82.112.3]                         // 美国 华盛顿州西雅图github公司
</code></pre><p>如果运营商在中间搞鬼的话, 就算挂梯子也没办法绕过, 因此需要修改映射公网的DNS。类似<code>8.8.8.8</code>和<code>114.114.114.114</code>这些公用DNS大家都比较了解, 但是使用的人并不少, 体验也并没有提升多少。在这里建议使用<a href=https://www.alidns.com/setup>AliDNS的公用DNS</a>做替代, 我寻思阿里不会那么闲去污染GitHub的DNS</p><p>遵循AliDNS的教程, 在运营商污染DNS这一块的问题基本上已经解决了, 如果还是访问不了的话, 很可能是被墙了。那一波就在中国电信骨干网的GFW了, 只能各显神通了, 正常的话不会这样的。</p><h2 id=无障碍加载github的静态资源>无障碍加载GitHub的静态资源</h2><p>经常有这么个情况, GitHub访问没问题, 但是头像还有<code>README.md</code>里面的图片加载不出来, 因为GitHub的静态资源不是<strong>github.com</strong>这个域名</p><p>而很可能是下面这些</p><pre><code class=language-text>github.githubassets.com
camo.githubusercontent.com
github.map.fastly.net
github.global.ssl.fastly.net
gist.github.com
github.io
github.com
api.github.com
raw.githubusercontent.com
user-images.githubusercontent.com
favicons.githubusercontent.com
avatars5.githubusercontent.com
avatars4.githubusercontent.com
avatars3.githubusercontent.com
avatars2.githubusercontent.com
avatars1.githubusercontent.com
avatars0.githubusercontent.com
codeload.github.com
github-cloud.s3.amazonaws.com
github-com.s3.amazonaws.com
github-production-release-asset-2e65be.s3.amazonaws.com
github-production-user-asset-6210df.s3.amazonaws.com
github-production-repository-file-5c1aeb.s3.amazonaws.com
githubstatus.com
github.community
</code></pre><p>最简单的方法其实是挂梯子, 不过也可以通过修改<strong>hosts</strong>文件的方法来改。在类Unix平台比较简单, 也就是<code>vim /etc/hosts</code>的事情。但是要一个个找IP是个非常操蛋的事情。。</p><p>在此建议参考这个项目 <a href=https://github.com/521xueweihan/GitHub520>GitHub520</a>, 然后参考教程使用 <a href=https://github.com/oldj/SwitchHosts>SwitchHosts!</a> 这个开源软件解决<strong>hosts</strong>修改的问题</p><blockquote><p>不过GitHub520那个项目是GitHub Action实现的, 可能存在能用但是不是最快的节点的情况, 实在不行就自己部署更新也没啥问题</p></blockquote><h2 id=通过cdn快速获取github可获取的资源>通过cdn快速获取GitHub可获取的资源</h2><p>上面那些解决了, 咱们使用GitHub基本上没啥问题了。但是, GitHub Release和GitHub仓库下载的速度非常的难受!!!</p><p>在<a href=https://github.com/NucoTech/nuco-backend-cli>nbc</a>这个项目的实践过程中就屡次被这个问题搞得非常恼火, 油猴上面其实有针对GitHub专门写了一些插件, 也专门有一些cdn来提高GitHub下载慢的情况, 下面是一些总结也可以用于开发</p><h3 id=获取分支资源>获取分支资源</h3><p>正常情况下, GitHub的仓库分支资源其实是不能单独下载的, 那咋办? 很简单, 通过cdn完成</p><p>举个例子, 我要下载<code>nuco-backend-cli</code>下面的<code>install.darwin.sh</code>, 可以通过访问下面的cdn获取</p><pre><code class=language-text>https://cdn.jsdelivr.net/gh/NucoTech/nuco-backend-cli@main/install.darwin.sh
</code></pre><p><a href=https://www.jsdelivr.com/>jsdelivr</a>这个cdn其实前端的小伙伴应该是非常熟悉的, 前端的npm包里面的静态资源都可以通过这个cdn来直接引用</p><p>官网也贴心的, 给了下面的使用格式</p><pre><code class=language-text>https://cdn.jsdelivr.net/gh/&lt;用户名&gt;/&lt;仓库名&gt;@&lt;分支&gt;/&lt;文件名&gt;
</code></pre><h3 id=获取github-release资源>获取GitHub Release资源</h3><p>这个cdn就比较多了, 列举几个, 所有的都是以<code>nbc.exe</code>资源获取为例的</p><pre><code class=language-text>https://gh.con.sh/https://github.com/NucoTech/nuco-backend-cli/releases/download/v1.3.0/nbc.exe

https://gh.api.99988866.xyz/https://github.com/NucoTech/nuco-backend-cli/releases/download/v1.3.0/nbc.exe

https://download.fastgit.org/NucoTech/nuco-backend-cli/releases/download/v1.3.0/nbc.exe

https://github.xiu2.xyz/https://github.com/NucoTech/nuco-backend-cli/releases/download/v1.3.0/nbc.exe

https://ghproxy.com/https://github.com/NucoTech/nuco-backend-cli/releases/download/v1.3.0/nbc.exe

https://pd.zwc365.com/seturl/https://github.com/NucoTech/nuco-backend-cli/releases/download/v1.3.0/nbc.exe
</code></pre><p>你也可以使用插件<a href=https://greasyfork.org/scripts/412245>GitHub增强 - 高速下载</a> 这个油猴脚本来实现</p><p>其中的部分cdn可以传入下面的格式, 实现获取latest release里面的资源</p><pre><code class=language-text>https://github.com/&lt;用户名&gt;/latest/releases/download/&lt;资源名&gt;
</code></pre></div><div class=my-4><a href=/tags/github/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#GitHub</a>
<a href=/tags/github.io/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#github.io</a></div><div class="flex md:justify-end my-4"><a href=https://github.com/HerbertHe/HerbertHe.github.io/blob/master/content/posts/%e6%8f%90%e5%8d%87%e5%9b%bd%e5%86%85GitHub%e8%ae%bf%e9%97%ae%e4%bd%93%e9%aa%8c.md title="Edit this page"><i class="fas fa-edit mr-1"></i>
<span>编辑本页</span></a></div><div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t"><div><span class="block font-bold">上一页</span>
<a href=/posts/win10%E4%BD%93%E9%AA%8C%E4%BC%98%E5%8C%96%E7%AD%96%E7%95%A5/ class=block>Win10体验优化策略</a></div><div class="md:text-right mt-4 md:mt-0"><span class="block font-bold">下一页</span>
<a href=/posts/%E5%89%8D%E7%AB%AF%E6%A0%B7%E5%BC%8F%E4%BC%98%E5%85%88%E7%BA%A7%E7%9A%84%E9%97%AE%E9%A2%98/ class=block>前端样式优先级的问题</a></div></div></div><div class=col-span-2><div class="sticky top-16 z-10 hidden lg:block px-6 py-4 bg-primary-bg"><span class="text-lg font-semibold">本页内容</span></div><div class="sticky-toc hidden lg:block px-6 pb-6"><nav id=TableOfContents><ul><li><a href=#概述>概述</a></li><li><a href=#无障碍访问githubio>无障碍访问<code>github.io</code></a></li><li><a href=#无障碍加载github的静态资源>无障碍加载GitHub的静态资源</a></li><li><a href=#通过cdn快速获取github可获取的资源>通过cdn快速获取GitHub可获取的资源</a><ul><li><a href=#获取分支资源>获取分支资源</a></li><li><a href=#获取github-release资源>获取GitHub Release资源</a></li></ul></li></ul></nav></div><script>window.addEventListener('DOMContentLoaded',()=>{enableStickyToc()})</script></div></div><script>document.addEventListener('DOMContentLoaded',()=>{hljs.initHighlightingOnLoad()})</script></div></div></main><footer class=pl-scrollbar><div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">Copyright &copy; 2018 ~ 2021 <a href=https://goer.icu>惒泊の部落格</a> All Rights Reserved!
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p></div></div></footer></body></html>