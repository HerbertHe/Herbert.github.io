<!doctype html><html lang=zh><meta charset=utf-8><meta name=viewport content="width=device-width"><title>Ubuntu环境安装docker记录 | 惒泊の部落格</title><link rel=stylesheet href=/css/eureka.min.css><script defer src=/js/eureka.min.js></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'"><link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css media=print onload="this.media='all',this.onload=null" crossorigin><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/dart.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/javascript.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/typescript.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/matlab.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/go.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/verilog.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/shell.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/bash.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/latex.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/markdown.min.js crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js integrity="sha256-uNYoXefWRqv+PsIF/OflNmwtKM4lStn9yrz2gVl6ymo=" crossorigin></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X media=print onload="this.media='all',this.onload=null" crossorigin><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script><link rel=icon type=image/png sizes=32x32 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_2.png><link rel=apple-touch-icon sizes=180x180 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_2.png><meta name=description content="本地环境 Ubuntu系统版本: Ubuntu19.10 软件源: 清华大学Tuna 虚拟机环境: VMware 15 新装Ubuntu基本配置 # 配"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"/posts/"},{"@type":"ListItem","position":2,"name":"Ubuntu环境安装docker记录","item":"/posts/ubuntu%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85docker%E8%AE%B0%E5%BD%95/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/ubuntu%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85docker%E8%AE%B0%E5%BD%95/"},"headline":"Ubuntu环境安装docker记录 | 惒泊の部落格","datePublished":"2020-01-28T13:26:34+00:00","dateModified":"2020-01-28T13:26:34+00:00","wordCount":1104,"publisher":{"@type":"Person","name":"HerbertHe","logo":{"@type":"ImageObject","url":"/images/icon.png"}},"description":"本地环境 Ubuntu系统版本: Ubuntu19.10 软件源: 清华大学Tuna 虚拟机环境: VMware 15 新装Ubuntu基本配置 # 配"}</script><meta property="og:title" content="Ubuntu环境安装docker记录 | 惒泊の部落格"><meta property="og:type" content="article"><meta property="og:image" content="/images/icon.png"><meta property="og:url" content="/posts/ubuntu%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85docker%E8%AE%B0%E5%BD%95/"><meta property="og:description" content="本地环境 Ubuntu系统版本: Ubuntu19.10 软件源: 清华大学Tuna 虚拟机环境: VMware 15 新装Ubuntu基本配置 # 配"><meta property="og:locale" content="zh"><meta property="og:site_name" content="惒泊の部落格"><meta property="article:published_time" content="2020-01-28T13:26:34+00:00"><meta property="article:modified_time" content="2020-01-28T13:26:34+00:00"><meta property="article:section" content="posts"><meta property="article:tag" content="docker"><meta property="article:tag" content="Ubuntu19"><meta property="article:tag" content="Linux"><meta property="article:tag" content="记录"><meta property="og:see_also" content="/posts/%E8%87%AA%E5%88%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9Flog/"><body class="flex flex-col min-h-screen"><header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm"><div class="w-full max-w-screen-xl mx-auto"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=='Auto'||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName('html')[0].classList.add('dark')</script><nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0"><a href=/ class="mr-6 text-primary-text text-xl font-bold">惒泊の部落格</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i></button><div id=target class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20"><div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0"><a href=/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">文章</a>
<a href=/categories/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">集合</a>
<a href=/tags/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">标签</a>
<a href=https://server.jieec.cn class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Jieec Server</a>
<a href=https://download.jieec.cn class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">Jieec Server Download</a></div><div class=flex><div class="relative pt-4 md:pt-0"><div class="cursor-pointer hover:text-eureka" id=lightDarkMode><i class="fas fa-adjust"></i></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open></div><div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions><span class="px-4 py-1 hover:text-eureka" name=Light>浅色</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>深色</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>自动</span></div></div></div></div><div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile></div></nav><script>let element=document.getElementById('lightDarkMode');storageColorScheme==null||storageColorScheme=='Auto'?document.addEventListener('DOMContentLoaded',()=>{switchMode('Auto')}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'sun'),element.firstElementChild.classList.add('fa-sun')):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'moon'),element.firstElementChild.classList.add('fa-moon')),document.addEventListener('DOMContentLoaded',()=>{getcolorscheme(),switchBurger()})</script></div></header><main class="flex-grow pt-16"><div class=pl-scrollbar><div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto"><div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12"><div class="col-span-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8"><h1 class="font-bold text-3xl text-primary-text">Ubuntu环境安装docker记录</h1><div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text"><div class="mr-6 my-2"><i class="fas fa-calendar mr-1"></i>
<span>2020-01-28</span></div><div class="mr-6 my-2"><i class="fas fa-clock mr-1"></i>
<span>3分钟阅读时长</span></div></div><div class=content><h2 id=本地环境>本地环境</h2><ul><li>Ubuntu系统版本: Ubuntu19.10</li><li>软件源: 清华大学Tuna</li><li>虚拟机环境: VMware 15</li></ul><h2 id=新装ubuntu基本配置>新装Ubuntu基本配置</h2><pre><code class=language-shell># 配置软件源
sudo nano /etc/apt/sources.list
</code></pre><pre><code class=language-sources.list># 首先注释掉所有的默认软件源
# 添加清华源 (演示系统为Ubuntu19.10, 软件代号为eoan! )

# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-updates main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-backports main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-security main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-security main restricted universe multiverse

# 预发布软件源，不建议启用
# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-proposed main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ eoan-proposed main restricted universe multiverse
</code></pre><blockquote><p>Ubuntu各版本代号简介请参考: <a href=https://blog.csdn.net/zhengmx100/article/details/78352773>传送门</a>, 不同版本对应的软件清华源: <a href=https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/>传送门</a></p></blockquote><pre><code class=language-shell>sudo apt update
sudo apt upgrade
</code></pre><h2 id=安装docker社区版>安装docker社区版</h2><p>安装docker可以参考docker官网的<a href=https://docs.docker.com/install/linux/docker-ce/ubuntu/>Get Docker Engine - Community for Ubuntu</a>, 也可以使用清华源镜像, 下面是参考<em>docker官网</em>和<em>清华源</em>对于安装过程的总结</p><p>docker支持的Ubuntu版本为:</p><ul><li>Disco 19.04</li><li>Cosmic 18.10</li><li>Bionic 18.04 (LTS)</li><li>Xenial 16.04 (LTS)</li></ul><blockquote><p>社区版支持的架构为: <code>x86_64(amd64)</code>, <code>armhf</code>, <code>arm64</code>, <code>s390x</code>, <code>ppc64le</code>!**Eoan 19.10软件源并不受支持!因此官网和清华源的命令在Ubuntu19.10下并不会成功!**报错请参考: <a href=https://www.jb51.net/article/173316.htm>分享Ubuntu19无法安装docker源问题</a></p></blockquote><h3 id=卸载旧版本的docker>卸载旧版本的docker</h3><pre><code class=language-shell>sudo apt-get remove docker docker-engine docker.io containerd runc
</code></pre><blockquote><p>docker社区版新版本名称为: docker-ce</p></blockquote><h3 id=更新软件源>更新软件源</h3><pre><code class=language-shell>sudo apt update
</code></pre><h3 id=下载依赖>下载依赖</h3><pre><code class=language-shell>sudo apt-get install \
    apt-transport-https \
    ca-certificates \
    curl \
    gnupg-agent \
    software-properties-common
</code></pre><h3 id=添加docker官方的gpg-key>添加docker官方的GPG key</h3><pre><code class=language-shell>curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
</code></pre><h3 id=验证指纹信息>验证指纹信息</h3><pre><code class=language-shell>sudo apt-key fingerprint 0EBFCD88

# 输出
pub   rsa4096 2017-02-22 [SCEA]
      9DC8 5822 9FC7 DD38 854A  E2D8 8D81 803C 0EBF CD88
uid           [ unknown] Docker Release (CE deb) &lt;docker@docker.com&gt;
sub   rsa4096 2017-02-22 [S]
</code></pre><h3 id=设置软件源>设置软件源</h3><blockquote><p>这一步很关键！</p></blockquote><ul><li>官网命令</li></ul><pre><code class=language-shell>sudo add-apt-repository \
   &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable&quot;
</code></pre><ul><li>清华源命令</li></ul><pre><code class=language-shell>sudo add-apt-repository \
   &quot;deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \
   $(lsb_release -cs) \
   stable&quot;
</code></pre><blockquote><p>上面的命令会在<code>/etc/apt/sources.list</code>文件中添加下面的内容(以清华源为例), 执行之后会报上面提到的错误</p></blockquote><pre><code class=language-sources.list>deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu eoan stable
# deb-src [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu eoan stable
</code></pre><blockquote><p>正确的做法是手动更改添加<code>Disco 19.04</code>的docker软件源！</p></blockquote><pre><code class=language-shell>sudo nano /etc/apt/sources.list
</code></pre><pre><code class=language-sources.list>deb [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu disco stable
# deb-src [arch=amd64] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu disco stable
</code></pre><p>保存之后执行更新和下载</p><pre><code class=language-shell>sudo apt update
sudo apt install docker-ce docker-ce-cli containerd.io
</code></pre><blockquote><p>指定版本下载，列出软件源所有可下载的版本可以参考官网的<a href=https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-docker-engine---community-1>To install a specific version of Docker Engine - Community</a>, 用包下载安装可以参考<a href=https://docs.docker.com/install/linux/docker-ce/ubuntu/#install-from-a-package>Install from a package</a></p></blockquote><h3 id=验证docker安装>验证docker安装</h3><p>通过跑测试镜像<code>hello-world</code>验证</p><pre><code class=language-shell>sudo docker run hello-world
</code></pre><blockquote><p>可能会因为网络的原因报错, 参考这篇帖子: <a href=https://blog.csdn.net/anjie5595/article/details/101501786>docker pull error pulling image configuration</a></p></blockquote><p>报错解决</p><pre><code class=language-shell># 停止docker服务
systemctl stop docker
# 修改daemon配置文件添加加速源
sudo nano /etc/docker/daemon.json
</code></pre><pre><code class=language-daemon.json>{
　　&quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;,&quot;http://hub-mirror.c.163.com&quot;]
}
</code></pre><pre><code class=language-shell># 重载配置
systemctl daemon-reload
# 重启docker服务
systemctl restart docker
</code></pre><blockquote><p>测试成功信息</p></blockquote><pre><code class=language-shell>Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 \$ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

</code></pre><h3 id=docker更新>docker更新</h3><p>直接使用<code>sudo apt upgrade</code>即可</p></div><div class=my-4><a href=/tags/docker/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#docker</a>
<a href=/tags/ubuntu19/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#Ubuntu19</a>
<a href=/tags/linux/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#Linux</a>
<a href=/tags/%E8%AE%B0%E5%BD%95/ class="inline-block bg-tertiary-bg text-sm rounded px-3 py-1 my-1 mr-2 hover:text-eureka">#记录</a></div><div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t"><div><span class="block font-bold">上一页</span>
<a href=/posts/%E8%AE%B0%E4%B8%80%E6%AC%A1js%E7%BA%BF%E7%A8%8B%E9%97%AE%E9%A2%98/ class=block>记一次JS线程问题</a></div><div class="md:text-right mt-4 md:mt-0"><span class="block font-bold">下一页</span>
<a href=/posts/nodejs%E5%AE%89%E8%A3%85%E8%8B%A5%E5%B9%B2%E9%97%AE%E9%A2%98%E9%81%BF%E5%9D%91/ class=block>Nodejs安装若干问题避坑</a></div></div></div><div class=col-span-2><div class="sticky top-16 z-10 hidden lg:block px-6 py-4 bg-primary-bg"><span class="text-lg font-semibold">本页内容</span></div><div class="sticky-toc hidden lg:block px-6 pb-6"><nav id=TableOfContents><ul><li><a href=#本地环境>本地环境</a></li><li><a href=#新装ubuntu基本配置>新装Ubuntu基本配置</a></li><li><a href=#安装docker社区版>安装docker社区版</a><ul><li><a href=#卸载旧版本的docker>卸载旧版本的docker</a></li><li><a href=#更新软件源>更新软件源</a></li><li><a href=#下载依赖>下载依赖</a></li><li><a href=#添加docker官方的gpg-key>添加docker官方的GPG key</a></li><li><a href=#验证指纹信息>验证指纹信息</a></li><li><a href=#设置软件源>设置软件源</a></li><li><a href=#验证docker安装>验证docker安装</a></li><li><a href=#docker更新>docker更新</a></li></ul></li></ul></nav></div><script>window.addEventListener('DOMContentLoaded',()=>{enableStickyToc()})</script></div><div class="col-span-2 lg:col-span-6 bg-secondary-bg rounded p-6"><h2 class="text-lg font-semibold mb-4">相关</h2><div class=content><a href=/posts/%E8%87%AA%E5%88%B6%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9Flog/>自制操作系统log</a><br></div></div></div><script>document.addEventListener('DOMContentLoaded',()=>{hljs.initHighlightingOnLoad()})</script></div></div></main><footer class=pl-scrollbar><div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b"><p class="text-sm text-tertiary-text">&copy; 2018 ~ 2021 <a href=https://goer.icu>惒泊の部落格</a> All Rights Reserved!
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p></div></div></footer></body></html>