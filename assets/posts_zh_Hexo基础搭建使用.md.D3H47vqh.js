import{_ as s,c as n,o as a,a6 as l}from"./chunks/framework.DqpHdag1.js";const m=JSON.parse('{"title":"Hexo基础搭建使用","description":"","frontmatter":{"title":"Hexo基础搭建使用","date":"2019-07-02T22:25:57.000Z","toc":true,"tags":["Hexo","nginx"]},"headers":[],"relativePath":"posts/zh/Hexo基础搭建使用.md","filePath":"posts/zh/Hexo基础搭建使用.md"}'),e={name:"posts/zh/Hexo基础搭建使用.md"},p=l(`<h2 id="hexo安装环境" tabindex="-1">Hexo安装环境 <a class="header-anchor" href="#hexo安装环境" aria-label="Permalink to &quot;Hexo安装环境&quot;">​</a></h2><ul><li><a href="http://nodejs.org/" target="_blank" rel="noreferrer">Node.js</a> (<a href="https://github.com/creationix/nvm" target="_blank" rel="noreferrer">nvm</a>)</li><li><a href="http://git-scm.com/" target="_blank" rel="noreferrer">Git</a></li></ul><blockquote><p>推荐使用nvm，在实践之后发现nvm真的很好用，当然Windows用户可以直接下载安装</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 下载node.js</span></span>
<span class="line"><span style="color:#88C0D0;"> nvm</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> stable</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="安装hexo" tabindex="-1">安装Hexo <a class="header-anchor" href="#安装hexo" aria-label="Permalink to &quot;安装Hexo&quot;">​</a></h2><blockquote><p>Linux和Mac用户直接使用下面的shell就完事了，Windows用户可以使用在相应文件夹下使用Window Powershell或者git bash然后shell，国内推荐用npm下载cnpm，代替npm来提高依赖的下载速度和稳定性！！（cnpm用的是淘宝的镜像）</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 下载cnpm</span></span>
<span class="line"><span style="color:#88C0D0;"> npm</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> -g</span><span style="color:#A3BE8C;"> cnpm</span><span style="color:#A3BE8C;"> --registry=https://registry.npm.taobao.org</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 安装Hexo</span></span>
<span class="line"><span style="color:#88C0D0;"> cnpm</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> -g</span><span style="color:#A3BE8C;"> hexo-cli</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="文章迁移插件的安装-没有需要的可以跳过" tabindex="-1">文章迁移插件的安装（没有需要的可以跳过） <a class="header-anchor" href="#文章迁移插件的安装-没有需要的可以跳过" aria-label="Permalink to &quot;文章迁移插件的安装（没有需要的可以跳过）&quot;">​</a></h2><p>Hexo官方支持的迁移来源</p><ul><li><a href="https://hexo.io/zh-cn/docs/migration#RSS" target="_blank" rel="noreferrer">RSS</a></li><li><a href="https://hexo.io/zh-cn/docs/migration#Jekyll" target="_blank" rel="noreferrer">Jekyll</a></li><li><a href="https://hexo.io/zh-cn/docs/migration#Octopress" target="_blank" rel="noreferrer">Octopress</a></li><li><a href="https://hexo.io/zh-cn/docs/migration#WordPress" target="_blank" rel="noreferrer">WordPress</a></li><li><a href="https://hexo.io/zh-cn/docs/migration#Joomla" target="_blank" rel="noreferrer">Joomla</a></li></ul><h2 id="初始化一个hexo项目" tabindex="-1">初始化一个Hexo项目 <a class="header-anchor" href="#初始化一个hexo项目" aria-label="Permalink to &quot;初始化一个Hexo项目&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 初始化博客项目</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> init</span><span style="color:#81A1C1;"> &lt;</span><span style="color:#A3BE8C;">项目名</span><span style="color:#D8DEE9FF;">称</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#88C0D0;"> cd</span><span style="color:#81A1C1;"> &lt;</span><span style="color:#A3BE8C;">项目名</span><span style="color:#D8DEE9FF;">称</span><span style="color:#81A1C1;">&gt;</span><span style="color:#616E88;">      # 打开项目文件夹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 下载Hexo server</span></span>
<span class="line"><span style="color:#88C0D0;"> cnpm</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> hexo-server</span><span style="color:#A3BE8C;"> --save</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 启动本地预览</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> server</span><span style="color:#616E88;">       # 默认http://localhost:4000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>关于更改预览设置的请参考 <a href="https://hexo.io/zh-cn/docs/server" target="_blank" rel="noreferrer">Hexo Server</a></p></blockquote><h2 id="修改hexo的主题" tabindex="-1">修改Hexo的主题 <a class="header-anchor" href="#修改hexo的主题" aria-label="Permalink to &quot;修改Hexo的主题&quot;">​</a></h2><p>这里以yilia为例（请保证网络环境）</p><div class="language-git line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">git</span><pre class="shiki nord vp-code"><code><span class="line"><span># 确保在上面项目文件夹下</span></span>
<span class="line"><span>git clone https://github.com/litten/hexo-theme-yilia.git themes/yilia</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>themes/yilia 也就是下载到项目文件夹下的themes/yilia目录下</p></blockquote><p>进入themes/yilia下，修改_config.yml文件</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># Linux的进入修改</span></span>
<span class="line"><span style="color:#88C0D0;"> cd</span><span style="color:#A3BE8C;"> themes/yilia</span></span>
<span class="line"><span style="color:#88C0D0;"> nano</span><span style="color:#A3BE8C;"> _config.yml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>Windows建议使用vscode打开编辑</p></blockquote><div class="language-yml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 修改内容</span></span>
<span class="line"><span style="color:#8FBCBB;">themes</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> yilia</span><span style="color:#616E88;">        # (上面下载位置文件夹名)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="生成保存更改" tabindex="-1">生成保存更改 <a class="header-anchor" href="#生成保存更改" aria-label="Permalink to &quot;生成保存更改&quot;">​</a></h2><blockquote><p>Hexo每次修改或者添加等操作都需要重新生成文件，生成的文件在工程根目录的public文件夹下</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 清除之前的文件</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> clean</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 生成新的文件</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> generate</span></span>
<span class="line"><span style="color:#616E88;"># 或者</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> g</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 预览文件</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> server</span></span>
<span class="line"><span style="color:#616E88;"># 或者</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> start</span></span>
<span class="line"><span style="color:#616E88;"># 或者</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> s</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p>在生成操作时可以使用--watch来比较文件的SHA1 checksum仅生成不同的文件</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 监视文件变动</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> generate</span><span style="color:#A3BE8C;"> --watch</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>一条命令也可以这样写</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 清除保存预览</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> clean</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> g</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> s</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="hexo的目录树" tabindex="-1">Hexo的目录树 <a class="header-anchor" href="#hexo的目录树" aria-label="Permalink to &quot;Hexo的目录树&quot;">​</a></h2><p>目录树在此就不赘述了，请参考Hexo官方介绍 <a href="https://hexo.io/zh-cn/docs/asset-folders" target="_blank" rel="noreferrer">资源文件夹</a> 和 <a href="https://hexo.io/zh-cn/docs/data-files" target="_blank" rel="noreferrer">数据文件夹</a></p><blockquote><p>作为仅markdown用户个人没有采取官方的引用方式而是使用了! [ ] ( )</p></blockquote><h2 id="hexo新建文章" tabindex="-1">Hexo新建文章 <a class="header-anchor" href="#hexo新建文章" aria-label="Permalink to &quot;Hexo新建文章&quot;">​</a></h2><p>Hexo的文章放置在根目录的/sources/_post下</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 生成一篇md文章</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> new</span><span style="color:#81A1C1;"> &lt;</span><span style="color:#A3BE8C;">文章</span><span style="color:#D8DEE9FF;">名</span><span style="color:#81A1C1;">&gt;</span></span>
<span class="line"><span style="color:#616E88;"># 或者</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> n</span><span style="color:#81A1C1;"> &lt;</span><span style="color:#A3BE8C;">文件</span><span style="color:#D8DEE9FF;">名</span><span style="color:#81A1C1;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>相关关于写作的具体操作参考 <a href="https://hexo.io/zh-cn/docs/writing" target="_blank" rel="noreferrer">写作</a></p></blockquote><h2 id="hexo的部署" tabindex="-1">Hexo的部署 <a class="header-anchor" href="#hexo的部署" aria-label="Permalink to &quot;Hexo的部署&quot;">​</a></h2><p>作为一个Git用户表示也习惯了git的使用，本文采取Gitpage来演示（其他参考 <a href="https://hexo.io/zh-cn/docs/deployment" target="_blank" rel="noreferrer">官方教程</a>）</p><h3 id="首先得下载依赖-根目录下" tabindex="-1">首先得下载依赖（根目录下） <a class="header-anchor" href="#首先得下载依赖-根目录下" aria-label="Permalink to &quot;首先得下载依赖（根目录下）&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 下载hexo-deployer-git</span></span>
<span class="line"><span style="color:#88C0D0;"> cnpm</span><span style="color:#A3BE8C;"> install</span><span style="color:#A3BE8C;"> hexo-deployer-git</span><span style="color:#A3BE8C;"> --save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="修改配置文件" tabindex="-1">修改配置文件 <a class="header-anchor" href="#修改配置文件" aria-label="Permalink to &quot;修改配置文件&quot;">​</a></h3><p>修改根目录下的_config.yml</p><div class="language-yml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#8FBCBB;">deploy</span><span style="color:#ECEFF4;">:</span></span>
<span class="line"><span style="color:#8FBCBB;">    type</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> git</span></span>
<span class="line"><span style="color:#8FBCBB;">    repo</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> &lt;Gitpage仓库地址&gt;</span></span>
<span class="line"><span style="color:#8FBCBB;">    branch</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> master</span><span style="color:#616E88;">            # 默认的分支就是master</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="重新生成更新文件-同上" tabindex="-1">重新生成更新文件（同上） <a class="header-anchor" href="#重新生成更新文件-同上" aria-label="Permalink to &quot;重新生成更新文件（同上）&quot;">​</a></h3><h3 id="发到部署仓库" tabindex="-1">发到部署仓库 <a class="header-anchor" href="#发到部署仓库" aria-label="Permalink to &quot;发到部署仓库&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 部署命令</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> deploy</span></span>
<span class="line"><span style="color:#616E88;"># 这里采取非监视的一条shell</span></span>
<span class="line"><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> clean</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> g</span><span style="color:#ECEFF4;"> &amp;&amp;</span><span style="color:#88C0D0;"> hexo</span><span style="color:#A3BE8C;"> d</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>私有库要求输入用户名和密码，首次安装git请参考git的设置</p></blockquote><h2 id="私人云服务器git仓库的搭建、nginx配置及部署" tabindex="-1">私人云服务器Git仓库的搭建、nginx配置及部署 <a class="header-anchor" href="#私人云服务器git仓库的搭建、nginx配置及部署" aria-label="Permalink to &quot;私人云服务器Git仓库的搭建、nginx配置及部署&quot;">​</a></h2><h3 id="云git仓库的建立" tabindex="-1">云Git仓库的建立 <a class="header-anchor" href="#云git仓库的建立" aria-label="Permalink to &quot;云Git仓库的建立&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 设置新的用户</span></span>
<span class="line"><span style="color:#88C0D0;"> useradd</span><span style="color:#A3BE8C;"> git</span><span style="color:#616E88;">           # 添加git用户</span></span>
<span class="line"><span style="color:#88C0D0;"> passwd</span><span style="color:#A3BE8C;"> git</span><span style="color:#616E88;">            # 设置git密码</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 修改权限文件</span></span>
<span class="line"><span style="color:#88C0D0;"> chown</span><span style="color:#B48EAD;"> 740</span><span style="color:#A3BE8C;"> /etc/sudoers</span></span>
<span class="line"><span style="color:#88C0D0;"> nano</span><span style="color:#A3BE8C;"> /etc/sudoers</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 添加内容</span></span>
<span class="line"><span style="color:#616E88;"># 找到 root ALL=(ALL:ALL) ALL</span></span>
<span class="line"><span style="color:#616E88;"># 下面添加</span></span>
<span class="line"><span style="color:#88C0D0;">git</span><span style="color:#A3BE8C;"> ALL=</span><span style="color:#D8DEE9FF;">(</span><span style="color:#A3BE8C;">ALL:ALL</span><span style="color:#D8DEE9FF;">) ALL</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 保存退出</span></span>
<span class="line"><span style="color:#616E88;"># 修改权限</span></span>
<span class="line"><span style="color:#88C0D0;"> chown</span><span style="color:#B48EAD;"> 440</span><span style="color:#A3BE8C;"> /etc/sudoers</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 关闭git用户shell权限</span></span>
<span class="line"><span style="color:#88C0D0;"> nano</span><span style="color:#A3BE8C;"> /etc/passwd</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 将git:x:1001:1001:,,,:/home/git:/bin/bash改为</span></span>
<span class="line"><span style="color:#88C0D0;">git:x:1001:1001:,,,:/home/git:/usr/bin/git-shell</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>在网上教程中会要求su git切换用户！！这里有一个坑，会报错的！！因为上面禁掉了git的shell权限！！可以不切换的</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 创建git目录</span></span>
<span class="line"><span style="color:#88C0D0;"> cd</span><span style="color:#A3BE8C;"> /home/git</span><span style="color:#616E88;">                # 没有的进入home然后mkdir git</span></span>
<span class="line"><span style="color:#88C0D0;"> mkdir</span><span style="color:#A3BE8C;"> blog.git</span><span style="color:#616E88;">              # 这里以blog.git为例建立git仓库</span></span>
<span class="line"><span style="color:#88C0D0;"> git</span><span style="color:#A3BE8C;"> init</span><span style="color:#A3BE8C;"> --bare</span><span style="color:#616E88;">             # 创建空仓库</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 创建网站目录</span></span>
<span class="line"><span style="color:#88C0D0;"> cd</span><span style="color:#A3BE8C;"> /var/www</span></span>
<span class="line"><span style="color:#88C0D0;"> mkdir</span><span style="color:#A3BE8C;"> blog</span><span style="color:#616E88;">                  # 这里/var/www/blog作为网站源码的存放位置</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>网上教程在这里证书配置ssh免密码认证，个人没有采用这种方式（老老实实输密码）</p><p>用户组的管理</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#88C0D0;"> ll</span><span style="color:#A3BE8C;"> /home/git/</span></span>
<span class="line"><span style="color:#88C0D0;"> ll</span><span style="color:#A3BE8C;"> /var/www/</span></span>
<span class="line"><span style="color:#616E88;"># 确保blog.git、blog目录的用户组权限为git:git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>如果不是</p></blockquote><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 执行</span></span>
<span class="line"><span style="color:#88C0D0;"> chown</span><span style="color:#A3BE8C;"> git:git</span><span style="color:#A3BE8C;"> -R</span><span style="color:#A3BE8C;"> /var/www/blog</span></span>
<span class="line"><span style="color:#88C0D0;"> chown</span><span style="color:#A3BE8C;"> git:git</span><span style="color:#A3BE8C;"> -R</span><span style="color:#A3BE8C;"> /home/git/blog.git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="配置nginx" tabindex="-1">配置nginx <a class="header-anchor" href="#配置nginx" aria-label="Permalink to &quot;配置nginx&quot;">​</a></h3><p>这里就不赘述nginx的参数意义和配置了，仅仅修改源码放置的配置！！！</p><div class="language-nginx line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 进入/etc/nginx/sites-available下</span></span>
<span class="line"><span style="color:#81A1C1;"> nano</span><span style="color:#D8DEE9FF;"> default</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;"># 修改配置文件的location下的root</span></span>
<span class="line"><span style="color:#616E88;"># 举个例子</span></span>
<span class="line"></span>
<span class="line"><span style="color:#81A1C1;">root </span><span style="color:#D8DEE9FF;">/var/www/blog</span><span style="color:#81A1C1;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>保存退出！然后重新加载nginx</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 重新加载nginx</span></span>
<span class="line"><span style="color:#88C0D0;"> service</span><span style="color:#A3BE8C;"> nginx</span><span style="color:#A3BE8C;"> reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="配置git-hooks" tabindex="-1">配置Git Hooks <a class="header-anchor" href="#配置git-hooks" aria-label="Permalink to &quot;配置Git Hooks&quot;">​</a></h3><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;"># 创建post-receive文件并添加内容</span></span>
<span class="line"><span style="color:#88C0D0;"> cd</span><span style="color:#A3BE8C;"> /home/git/blog.git/hooks</span><span style="color:#616E88;">           # 切换目录</span></span>
<span class="line"></span>
<span class="line"><span style="color:#88C0D0;"> nano</span><span style="color:#A3BE8C;"> post-receive</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>添加内容</p><div class="language-post-receive line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">post-receive</span><pre class="shiki nord vp-code"><code><span class="line"><span>#!/bin/bash</span></span>
<span class="line"><span>GIT_REPO=/home/git/blog.git</span></span>
<span class="line"><span>TMP_GIT_CLONE=/tmp/blog</span></span>
<span class="line"><span>PUBLIC_WWW=/var/www/blog</span></span>
<span class="line"><span>rm -rf \${TMP_GIT_CLONE}</span></span>
<span class="line"><span>git clone $GIT_REPO $TMP_GIT_CLONE</span></span>
<span class="line"><span>rm -rf \${PUBLIC_WWW}/*</span></span>
<span class="line"><span>cp -rf \${TMP_GIT_CLONE}/* \${PUBLIC_WWW}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>上面内容可以按需要修改</p></blockquote><p>保存退出之后，chmod +x post-receive赋予可执行权限</p><h3 id="配置本地工程部署" tabindex="-1">配置本地工程部署 <a class="header-anchor" href="#配置本地工程部署" aria-label="Permalink to &quot;配置本地工程部署&quot;">​</a></h3><p>上面是基于Gitpage配置的Hexo，在此只需要修改_config.yml的deploy下的repo</p><div class="language-yml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#8FBCBB;">repo</span><span style="color:#ECEFF4;">:</span><span style="color:#A3BE8C;"> git@你的服务器IP:blog.git</span><span style="color:#616E88;">               # git访问对应服务器的blog.git仓库</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>然后就是上面的部署操作就完成了！！</p><h2 id="yilia主题下文章预览设置more的操作" tabindex="-1">yilia主题下文章预览设置more的操作 <a class="header-anchor" href="#yilia主题下文章预览设置more的操作" aria-label="Permalink to &quot;yilia主题下文章预览设置more的操作&quot;">​</a></h2><div class="language-md line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki nord vp-code"><code><span class="line"><span style="color:#616E88;">&lt;!-- 在你要中断文章结尾的位置添加下面的内容 --&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#616E88;">&lt;!-- more --&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="参考文档" tabindex="-1">参考文档 <a class="header-anchor" href="#参考文档" aria-label="Permalink to &quot;参考文档&quot;">​</a></h2><ul><li><a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noreferrer">官网文档</a></li><li><a href="https://www.jianshu.com/p/b926ecf1c6f6" target="_blank" rel="noreferrer">简书博文</a></li></ul>`,76),o=[p];function r(c,i,t,b,d,u){return a(),n("div",null,o)}const y=s(e,[["render",r]]);export{m as __pageData,y as default};
